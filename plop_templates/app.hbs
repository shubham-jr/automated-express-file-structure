const app = require("express")();
const bodyParser = require("body-parser");
const cookie = require("cookie-parser");

// Requiring_Routes

const globalErrorHandler = require("./controllers/errorController");
const AppError = require("./utils/AppError");

app.use(bodyParser.urlencoded({ extended: true }));
app.use(bodyParser.json());
app.use(cookie());

// // Using_Routes

app.use("*", (req, res, next) => {
  next(new AppError(`${req.originalUrl} not found`, 404));
});

app.use(globalErrorHandler);

module.exports = app;