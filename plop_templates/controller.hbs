const httpStatus = require('http-status');
const validateSchema = require("../middlewares/validate");
const ApiError = require('../utils/ApiError');
require('express-async-errors');

const {{name}}Validation = require('../validations/{{name}}.validation');

const {{name}}Service = require('../services/{{name}}.service');

const create{{camel name}} = async (req, res) => {

  validateSchema(req, {{name}}Validation.create{{camel name}});

  const {} = req.body;

  const created{{camel name}} = await {{name}}Service.create{{camel name}}({
   
  });
  res.status(httpStatus.CREATED).send({ created{{camel name}} });
};

const getAll{{camel name}} = async (req, res) => {

  const query = req.query.type?.length ? { type: req.query.type } : {};

  const {{name}}s = await {{name}}Service.getAll{{camel name}}({query});

  res.status(httpStatus.CREATED).send({ total{{camel name}}: {{name}}.length, getAll{{camel name}} });
};

const get{{camel name}} = async (req, res) => {

  const {id} = req.params;

  const {{name}} = await {{name}}Service.get{{camel name}}({ id });

  res.status(httpStatus.CREATED).send({ {{name}} });
};

const update{{camel name}} = async (req, res) => {

  const {id} = req.params;

  // validateSchema(req, {{name}}Validation.update{{camel name}});

  const updated{{name}} = await {{name}}Service.update{{camel name}}({ id, body:req.body });

  res.status(httpStatus.CREATED).send({ updated{{name}} });
};

const delete{{camel name}} = async (req, res) => {

  const {id} = req.params;

  await {{name}}Service.delete{{camel name}}({ id });

  res.status(httpStatus.CREATED).send({ });
};



module.exports = { create{{camel name}}, getAll{{camel name}}, update{{camel name}}, get{{camel name}},delete{{camel name}} };